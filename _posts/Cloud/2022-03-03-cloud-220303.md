---
title: "[Cloud] Classify Images of Clouds in the Cloud with AutoML Vision"

categories:
 - Cloud
tags:
 - [Cloud, GoogleCloud]

toc: ture
toc_sticky: true

---

üíª **2022 Google Cloud Study Jam** AI & ML ÏûÖÎ¨∏ Í≥ºÏ†ïÏóê Ï∞∏Ïó¨Ìïú Í∏∞Î°ùÏûÖÎãàÎã§.
{: .notice--primary}

## Overview

- Uploading a labeled dataset to Cloud Storage and connecting it to AutoML Vision with a CSV label file.
- Training a model with AutoML Vision and evaluating its accuracy.
- Generating predictions on your trained model.



## Set up AutoML Vision

- APIs & Services > Library
  - Cloud AutoML Í≤ÄÏÉâ
  - Cloud AutoML API ÌôúÏÑ±Ìôî
=======
![image](https://user-images.githubusercontent.com/90893596/156577862-7caa7ffe-cb81-4d47-9c1a-95c3f92c011a.png)

- APIs & Services > Library
  - Cloud AutoML Í≤ÄÏÉâ
  - Cloud AutoML API ÌôúÏÑ±Ìôî
  
![image](https://user-images.githubusercontent.com/90893596/156577970-d1b764ff-28ea-4db7-ae61-67e6618ad002.png)
![image](https://user-images.githubusercontent.com/90893596/156577996-4993e10a-6cbe-42b3-b5bf-d2888ca23f9f.png)

- Cloud Shell ÌôúÏÑ±Ìôî

```
Welcome to Cloud Shell! Type "help" to get started.
Your Cloud Platform project in this session is set to qwiklabs-gcp-03-***.
Use ‚Äúgcloud config set project [PROJECT_ID]‚Äù to change to a different project.
student_00_***@cloudshell:~ (qwiklabs-gcp-03-***)$ gcloud auth list
Credentialed Accounts

ACTIVE: *
ACCOUNT: student-00-***@qwiklabs.net

To set the active account, run:
    $ gcloud config set account `ACCOUNT`

student_00_***@cloudshell:~ (qwiklabs-gcp-03-***)$ gcloud config list project
[core]
project = qwiklabs-gcp-03-***

Your active configuration is: [cloudshell-24297]
```

- Cloud Storage Î≤ÑÌÇ∑ ÏÉùÏÑ±

```
student_00_***@cloudshell:~ (qwiklabs-gcp-03-***)$ export PROJECT_ID=$DEVSHELL_PROJECT_ID
student_00_***@cloudshell:~ (qwiklabs-gcp-03-***)$ export QWIKLABS_USERNAME=student-00-***@qwiklabs.net
student_00_***@cloudshell:~ (qwiklabs-gcp-03-***)$ gcloud projects add-iam-policy-binding $PROJECT_ID \
    --member="user:$QWIKLABS_USERNAME" \
    --role="roles/automl.admin"
Updated IAM policy for project [qwiklabs-gcp-03-***].
bindings:
- members:
  - user:student-00-***@qwiklabs.net
  role: roles/appengine.appAdmin
- members:
  - user:student-00-***@qwiklabs.net
  role: roles/automl.admin
- members:
  - serviceAccount:qwiklabs-gcp-03-***@qwiklabs-gcp-03-***.iam.gserviceaccount.com
  - user:student-00-***@qwiklabs.net
  role: roles/bigquery.admin
- members:
  - serviceAccount:***@cloudbuild.gserviceaccount.com
  role: roles/cloudbuild.builds.builder
- members:
  - serviceAccount:service-***@gcp-sa-cloudbuild.iam.gserviceaccount.com
  role: roles/cloudbuild.serviceAgent
- members:
  - serviceAccount:service-***@compute-system.iam.gserviceaccount.com
  role: roles/compute.serviceAgent
- members:
  - serviceAccount:service-***@container-engine-robot.iam.gserviceaccount.com
  role: roles/container.serviceAgent
- members:
  - serviceAccount:***-compute@developer.gserviceaccount.com
  - serviceAccount:***@cloudservices.gserviceaccount.com
  role: roles/editor
- members:
  - serviceAccount:admiral@qwiklabs-services-prod.iam.gserviceaccount.com
  - serviceAccount:qwiklabs-gcp-03-***@qwiklabs-gcp-03-***.iam.gserviceaccount.com
  - user:student-00-***@qwiklabs.net
  role: roles/owner
- members:
  - user:student-00-***@qwiklabs.net
  role: roles/serviceusage.serviceUsageAdmin
- members:
  - serviceAccount:qwiklabs-gcp-03-***@qwiklabs-gcp-03-***.iam.gserviceaccount.com
  role: roles/storage.admin
- members:
  - user:student-00-***@qwiklabs.net
  role: roles/viewer
etag: BwXZHzzFEnU=
version: 1
student_00_***@cloudshell:~ (qwiklabs-gcp-03-***)$ gsutil mb -p $PROJECT_ID \
    -c standard    \
    -l us-central1 \
    gs://$PROJECT_ID-vcm/
Creating gs://qwiklabs-gcp-03-***-vcm/...
```



## Upload training images to Cloud Storage

- Íµ¨Î¶Ñ Ïù¥ÎØ∏ÏßÄ Î∂ÑÎ•ò

```
student_00_***@cloudshell:~ (qwiklabs-gcp-03-***)$ export BUCKET=$PROJECT_ID-vcm
student_00_***@cloudshell:~ (qwiklabs-gcp-03-***)$ gsutil -m cp -r gs://spls/gsp223/images/* gs://${BUCKET}
Copying gs://spls/gsp223/images/cirrus/13.jpg [Content-Type=image/jpeg]...
Copying gs://spls/gsp223/images/cirrus/12.jpg [Content-Type=image/jpeg]...
Copying gs://spls/gsp223/images/cirrus/1.jpg [Content-Type=image/jpeg]...
Copying gs://spls/gsp223/images/cirrus/11.jpg [Content-Type=image/jpeg]...
Copying gs://spls/gsp223/images/cirrus/10.jpg [Content-Type=image/jpeg]...
Copying gs://spls/gsp223/images/cirrus/18.jpg [Content-Type=image/jpeg]...
Copying gs://spls/gsp223/images/cirrus/14.jpg [Content-Type=image/jpeg]...
Copying gs://spls/gsp223/images/cirrus/16.jpg [Content-Type=image/jpeg]...
Copying gs://spls/gsp223/images/cirrus/15.jpg [Content-Type=image/jpeg]...
Copying gs://spls/gsp223/images/cirrus/17.jpg [Content-Type=image/jpeg]...
Copying gs://spls/gsp223/images/cirrus/2.jpg [Content-Type=image/jpeg]...
Copying gs://spls/gsp223/images/cirrus/19.jpg [Content-Type=image/jpeg]...
Copying gs://spls/gsp223/images/cirrus/20.jpg [Content-Type=image/jpeg]...
Copying gs://spls/gsp223/images/cirrus/3.jpg [Content-Type=image/jpeg]...
Copying gs://spls/gsp223/images/cirrus/4.jpg [Content-Type=image/jpeg]...
Copying gs://spls/gsp223/images/cirrus/5.jpg [Content-Type=image/jpeg]...
Copying gs://spls/gsp223/images/cirrus/6.jpg [Content-Type=image/jpeg]...
Copying gs://spls/gsp223/images/cirrus/7.jpg [Content-Type=image/jpeg]...
Copying gs://spls/gsp223/images/cirrus/8.jpg [Content-Type=image/jpeg]...
Copying gs://spls/gsp223/images/cirrus/9.jpg [Content-Type=image/jpeg]...
Copying gs://spls/gsp223/images/cumulonimbus/1.jpg [Content-Type=image/jpeg]...
Copying gs://spls/gsp223/images/cumulonimbus/10.jpg [Content-Type=image/jpeg]...
Copying gs://spls/gsp223/images/cumulonimbus/11.jpg [Content-Type=image/jpeg]...
Copying gs://spls/gsp223/images/cumulonimbus/12.jpg [Content-Type=image/jpeg]...
Copying gs://spls/gsp223/images/cumulonimbus/13.jpg [Content-Type=image/jpeg]...
Copying gs://spls/gsp223/images/cumulonimbus/14.jpg [Content-Type=image/jpeg]...
Copying gs://spls/gsp223/images/cumulonimbus/15.jpg [Content-Type=image/jpeg]...
Copying gs://spls/gsp223/images/cumulonimbus/16.jpg [Content-Type=image/jpeg]...
Copying gs://spls/gsp223/images/cumulonimbus/17.jpg [Content-Type=image/jpeg]...
Copying gs://spls/gsp223/images/cumulonimbus/18.jpg [Content-Type=image/jpeg]...
Copying gs://spls/gsp223/images/cumulonimbus/19.jpg [Content-Type=image/jpeg]...
Copying gs://spls/gsp223/images/cumulonimbus/2.jpg [Content-Type=image/jpeg]...
Copying gs://spls/gsp223/images/cumulonimbus/20.jpg [Content-Type=image/jpeg]...
Copying gs://spls/gsp223/images/cumulonimbus/3.jpg [Content-Type=image/jpeg]...
Copying gs://spls/gsp223/images/cumulonimbus/4.jpg [Content-Type=image/jpeg]...
Copying gs://spls/gsp223/images/cumulonimbus/6.jpg [Content-Type=image/jpeg]...
Copying gs://spls/gsp223/images/cumulonimbus/5.jpg [Content-Type=image/jpeg]...
Copying gs://spls/gsp223/images/cumulonimbus/7.jpg [Content-Type=image/jpeg]...
Copying gs://spls/gsp223/images/cumulonimbus/8.jpg [Content-Type=image/jpeg]...
Copying gs://spls/gsp223/images/cumulonimbus/9.jpg [Content-Type=image/jpeg]...
Copying gs://spls/gsp223/images/cumulus/1.jpg [Content-Type=image/jpeg]...
Copying gs://spls/gsp223/images/cumulus/10.jpg [Content-Type=image/jpeg]...
Copying gs://spls/gsp223/images/cumulus/11.jpg [Content-Type=image/jpeg]...
Copying gs://spls/gsp223/images/cumulus/12.jpg [Content-Type=image/jpeg]...
Copying gs://spls/gsp223/images/cumulus/13.jpg [Content-Type=image/jpeg]...
Copying gs://spls/gsp223/images/cumulus/14.jpg [Content-Type=image/jpeg]...
Copying gs://spls/gsp223/images/cumulus/15.jpg [Content-Type=image/jpeg]...
Copying gs://spls/gsp223/images/cumulus/16.jpg [Content-Type=image/jpeg]...
Copying gs://spls/gsp223/images/cumulus/17.jpg [Content-Type=image/jpeg]...
Copying gs://spls/gsp223/images/cumulus/18.jpg [Content-Type=image/jpeg]...
Copying gs://spls/gsp223/images/cumulus/19.jpg [Content-Type=image/jpeg]...
Copying gs://spls/gsp223/images/cumulus/2.jpg [Content-Type=image/jpeg]...
Copying gs://spls/gsp223/images/cumulus/20.jpg [Content-Type=image/jpeg]...
Copying gs://spls/gsp223/images/cumulus/3.jpg [Content-Type=image/jpeg]...
Copying gs://spls/gsp223/images/cumulus/4.jpg [Content-Type=image/jpeg]...
Copying gs://spls/gsp223/images/cumulus/5.jpg [Content-Type=image/jpeg]...
Copying gs://spls/gsp223/images/cumulus/6.jpg [Content-Type=image/jpeg]...
Copying gs://spls/gsp223/images/cumulus/7.jpg [Content-Type=image/jpeg]...
Copying gs://spls/gsp223/images/cumulus/8.jpg [Content-Type=image/jpeg]...
Copying gs://spls/gsp223/images/cumulus/9.jpg [Content-Type=image/jpeg]...
student_00_***@cloudshell:~ (qwiklabs-gcp-03-***)$ gsutil -m cp -r gs://spls/gsp223/images/* gs://${BUCKET}
Copying gs://spls/gsp223/images/cirrus/14.jpg [Content-Type=image/jpeg]...
Copying gs://spls/gsp223/images/cirrus/13.jpg [Content-Type=image/jpeg]...
Copying gs://spls/gsp223/images/cirrus/1.jpg [Content-Type=image/jpeg]...
Copying gs://spls/gsp223/images/cirrus/10.jpg [Content-Type=image/jpeg]...
Copying gs://spls/gsp223/images/cirrus/11.jpg [Content-Type=image/jpeg]...
Copying gs://spls/gsp223/images/cirrus/18.jpg [Content-Type=image/jpeg]...
Copying gs://spls/gsp223/images/cirrus/12.jpg [Content-Type=image/jpeg]...
Copying gs://spls/gsp223/images/cirrus/16.jpg [Content-Type=image/jpeg]...
Copying gs://spls/gsp223/images/cirrus/15.jpg [Content-Type=image/jpeg]...
Copying gs://spls/gsp223/images/cirrus/17.jpg [Content-Type=image/jpeg]...
Copying gs://spls/gsp223/images/cirrus/19.jpg [Content-Type=image/jpeg]...
Copying gs://spls/gsp223/images/cirrus/2.jpg [Content-Type=image/jpeg]...
Copying gs://spls/gsp223/images/cirrus/20.jpg [Content-Type=image/jpeg]...
Copying gs://spls/gsp223/images/cirrus/3.jpg [Content-Type=image/jpeg]...
Copying gs://spls/gsp223/images/cirrus/4.jpg [Content-Type=image/jpeg]...
Copying gs://spls/gsp223/images/cirrus/5.jpg [Content-Type=image/jpeg]...
Copying gs://spls/gsp223/images/cirrus/6.jpg [Content-Type=image/jpeg]...
Copying gs://spls/gsp223/images/cirrus/7.jpg [Content-Type=image/jpeg]...
Copying gs://spls/gsp223/images/cirrus/8.jpg [Content-Type=image/jpeg]...
Copying gs://spls/gsp223/images/cirrus/9.jpg [Content-Type=image/jpeg]...
Copying gs://spls/gsp223/images/cumulonimbus/1.jpg [Content-Type=image/jpeg]...
Copying gs://spls/gsp223/images/cumulonimbus/10.jpg [Content-Type=image/jpeg]...
Copying gs://spls/gsp223/images/cumulonimbus/11.jpg [Content-Type=image/jpeg]...
Copying gs://spls/gsp223/images/cumulonimbus/12.jpg [Content-Type=image/jpeg]...
Copying gs://spls/gsp223/images/cumulonimbus/13.jpg [Content-Type=image/jpeg]...
Copying gs://spls/gsp223/images/cumulonimbus/14.jpg [Content-Type=image/jpeg]...
Copying gs://spls/gsp223/images/cumulonimbus/15.jpg [Content-Type=image/jpeg]...
Copying gs://spls/gsp223/images/cumulonimbus/16.jpg [Content-Type=image/jpeg]...
Copying gs://spls/gsp223/images/cumulonimbus/17.jpg [Content-Type=image/jpeg]...
Copying gs://spls/gsp223/images/cumulonimbus/18.jpg [Content-Type=image/jpeg]...
Copying gs://spls/gsp223/images/cumulonimbus/19.jpg [Content-Type=image/jpeg]...
Copying gs://spls/gsp223/images/cumulonimbus/2.jpg [Content-Type=image/jpeg]...
Copying gs://spls/gsp223/images/cumulonimbus/20.jpg [Content-Type=image/jpeg]...
Copying gs://spls/gsp223/images/cumulonimbus/3.jpg [Content-Type=image/jpeg]...
Copying gs://spls/gsp223/images/cumulonimbus/4.jpg [Content-Type=image/jpeg]...
Copying gs://spls/gsp223/images/cumulonimbus/5.jpg [Content-Type=image/jpeg]...
Copying gs://spls/gsp223/images/cumulonimbus/6.jpg [Content-Type=image/jpeg]...
Copying gs://spls/gsp223/images/cumulonimbus/7.jpg [Content-Type=image/jpeg]...
Copying gs://spls/gsp223/images/cumulonimbus/8.jpg [Content-Type=image/jpeg]...
Copying gs://spls/gsp223/images/cumulonimbus/9.jpg [Content-Type=image/jpeg]...
Copying gs://spls/gsp223/images/cumulus/1.jpg [Content-Type=image/jpeg]...
Copying gs://spls/gsp223/images/cumulus/10.jpg [Content-Type=image/jpeg]...
Copying gs://spls/gsp223/images/cumulus/11.jpg [Content-Type=image/jpeg]...
Copying gs://spls/gsp223/images/cumulus/12.jpg [Content-Type=image/jpeg]...
Copying gs://spls/gsp223/images/cumulus/13.jpg [Content-Type=image/jpeg]...
Copying gs://spls/gsp223/images/cumulus/14.jpg [Content-Type=image/jpeg]...
Copying gs://spls/gsp223/images/cumulus/15.jpg [Content-Type=image/jpeg]...
Copying gs://spls/gsp223/images/cumulus/16.jpg [Content-Type=image/jpeg]...
Copying gs://spls/gsp223/images/cumulus/17.jpg [Content-Type=image/jpeg]...
Copying gs://spls/gsp223/images/cumulus/18.jpg [Content-Type=image/jpeg]...
Copying gs://spls/gsp223/images/cumulus/19.jpg [Content-Type=image/jpeg]...
Copying gs://spls/gsp223/images/cumulus/2.jpg [Content-Type=image/jpeg]...
Copying gs://spls/gsp223/images/cumulus/20.jpg [Content-Type=image/jpeg]...
Copying gs://spls/gsp223/images/cumulus/3.jpg [Content-Type=image/jpeg]...
Copying gs://spls/gsp223/images/cumulus/4.jpg [Content-Type=image/jpeg]...
Copying gs://spls/gsp223/images/cumulus/5.jpg [Content-Type=image/jpeg]...
Copying gs://spls/gsp223/images/cumulus/6.jpg [Content-Type=image/jpeg]...
Copying gs://spls/gsp223/images/cumulus/7.jpg [Content-Type=image/jpeg]...
Copying gs://spls/gsp223/images/cumulus/8.jpg [Content-Type=image/jpeg]...
Copying gs://spls/gsp223/images/cumulus/9.jpg [Content-Type=image/jpeg]...
```



## Create a dataset

```
student_00_***@cloudshell:~ (qwiklabs-gcp-03-***)$ gsutil cp gs://spls/gsp223/data.csv .
Copying gs://spls/gsp223/data.csv...
/ [1 files][  2.5 KiB/  2.5 KiB]
Operation completed over 1 objects/2.5 KiB.
student_00_***@cloudshell:~ (qwiklabs-gcp-03-***)$ sed -i -e "s/placeholder/${BUCKET}/g" ./data.csv
student_00_***@cloudshell:~ (qwiklabs-gcp-03-***)$ gsutil cp ./data.csv gs://${BUCKET}
Copying file://./data.csv [Content-Type=text/csv]...
/ [1 files][  3.7 KiB/  3.7 KiB]
Operation completed over 1 objects/3.7 KiB.
```

![1](https://user-images.githubusercontent.com/90893596/156580505-2f153f6b-8d24-4392-aa77-de62c6d450bb.png)

- ÏÉàÎ°úÍ≥†Ïπ® ÌïÑÏöî



## Inspect images

![image](https://user-images.githubusercontent.com/90893596/156580896-947b85d6-8a5a-4b68-ac53-66001238d783.png)



## Train your model

![image](https://user-images.githubusercontent.com/90893596/156581090-97b42ba6-04c9-4f1a-8655-818be35c5d91.png)



## Evaluate your model

![image](https://user-images.githubusercontent.com/90893596/156581169-7549aab6-15a6-4108-b5fd-d771a3ed3336.png)



## Deploy your model

![image](https://user-images.githubusercontent.com/90893596/156581251-19edc9c5-1988-445a-9f8b-66aaa24b9fb8.png)



## Generate predictions

![image](https://user-images.githubusercontent.com/90893596/156581366-4b664181-0069-4b2d-a6f3-5e465609eb16.png)

- ÏÇ¨ÏßÑ ÏóÖÎ°úÎìúÎäî ÏÑ±Í≥µÌñàÏúºÎÇò, Ìï¥Îãπ ÎØ∏ÏÖò ÌôîÎ©¥ÏùÄ ÌôïÏù∏ Î™ªÌñàÎäîÎç∞ ÏôÑÎ£åÌñàÎã§Í≥† Îú∏!?

>>>>>>> 790f88ed5ba1849f58fdad3d7056d65004347caf
