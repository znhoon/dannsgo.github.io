---
title: "[React.js] PRACTICE MOVIE APP (5)"

categories:
 - WWW
tags:
 - [WWW, HTML, CSS, JavaScript, React]

toc: true
toc_sticky: true
published: true

date: 2022-03-09
last_modified_at: 2022-03-09

---

üìÑ **ReactJSÎ°ú ÏòÅÌôî Ïõπ ÏÑúÎπÑÏä§ ÎßåÎì§Í∏∞**Î•º Í≥µÎ∂ÄÌïòÍ≥† Ï†ïÎ¶¨Ìïú Ìè¨Ïä§Ìä∏ÏûÖÎãàÎã§.
{: .notice--primary}

## EFFECTS

### Introduction

**App.js**

```js
import Button from "./Button";
import styles from "./App.module.css";
import { useState } from "react";

function App() {
    const [counter, setValue] = useState(0);
    const onClick = () => setValue((prev) => prev + 1);
    console.log("call an api");
    return (
        <div>
            <h1>{counter}</h1>
            <button onClick={onClick}>click</button>
        </div>
    );
}

export default App;

```



### useEffect

- useEffect
  - function useEffect(effect: EffectCallback, deps?: DependencyList)
  - 2Í∞úÏùò argumentÎ•º Í∞ÄÏßÄÎäî Ìï®Ïàò
    - Ï≤´ Î≤àÏß∏ argument == 1Î≤àÎßå Ïã§ÌñâÌïòÍ≥†Ïûê ÌïòÎäî ÏΩîÎìú
    - Îëê Î≤àÏß∏ argument

**App.js**

```js
import Button from "./Button";
import styles from "./App.module.css";
import { useState, useEffect } from "react";

function App() {
    const [counter, setValue] = useState(0);
    const onClick = () => setValue((prev) => prev + 1);
    console.log("i run all the time");
    const iRunOnlyOnce = () => {
        console.log("i run only once.");
    };
    useEffect(iRunOnlyOnce, []);
    return (
        <div>
            <h1>{counter}</h1>
            <button onClick={onClick}>click</button>
        </div>
    );
}

export default App;

```



### Deps

**App.js**

```js
import Button from "./Button";
import styles from "./App.module.css";
import { useState, useEffect } from "react";

function App() {
    const [counter, setValue] = useState(0);
    const [keyword, setKeyword] = useState("");
    const onClick = () => setValue((prev) => prev + 1);
    const onChange = (event) => setKeyword(event.target.value);
    console.log("i run all the time");
    useEffect(() => {
        console.log("CALL THE API.....");
    }, []);
    useEffect(() => {
        console.log("SEARCH FOR", keyword);
    }, [keyword]);
    return (
        <div>
            <input value={keyword} onChange={onChange} type="text" placeholder="Search here..."></input>
            <h1>{counter}</h1>
            <button onClick={onClick}>click</button>
        </div>
    );
}

export default App;
```

- useEffect(() => { (); }, [keyword]);
  - keywordÏù¥ÎùºÎäî propÍ∞Ä Î≥ÄÌôîÌï† ÎïåÎßàÎã§ ÏΩîÎìú Ïã§Ìñâ

```js
import Button from "./Button";
import styles from "./App.module.css";
import { useState, useEffect } from "react";

function App() {
    const [counter, setValue] = useState(0);
    const [keyword, setKeyword] = useState("");
    const onClick = () => setValue((prev) => prev + 1);
    const onChange = (event) => setKeyword(event.target.value);
    console.log("i run all the time");
    useEffect(() => {
        console.log("CALL THE API.....");
    }, []);
    useEffect(() => {
        if (keyword !== "" && keyword.length > 5) console.log("SEARCH FOR", keyword);
    }, [keyword]);
    return (
        <div>
            <input value={keyword} onChange={onChange} type="text" placeholder="Search here..."></input>
            <h1>{counter}</h1>
            <button onClick={onClick}>click</button>
        </div>
    );
}

export default App;
```

- Ï°∞Í±¥Î¨∏
  - if (keyword !== "" && keyword.length > 5) 

```js
import { useState, useEffect } from "react";

function App() {
    const [counter, setValue] = useState(0);
    const [keyword, setKeyword] = useState("");
    const onClick = () => setValue((prev) => prev + 1);
    const onChange = (event) => setKeyword(event.target.value);
    useEffect(() => {
        console.log("i run only once");
    }, []);
    useEffect(() => {
        console.log("i run when 'keyword' changes.");
    }, [keyword]);
    useEffect(() => {
        console.log("i run when 'counter' changes.");
    }, [counter]);
    return (
        <div>
            <input value={keyword} onChange={onChange} type="text" placeholder="Search here..."></input>
            <h1>{counter}</h1>
            <button onClick={onClick}>click</button>
        </div>
    );
}

export default App;
```

```js
import { useState, useEffect } from "react";

function App() {
    const [counter, setValue] = useState(0);
    const [keyword, setKeyword] = useState("");
    const onClick = () => setValue((prev) => prev + 1);
    const onChange = (event) => setKeyword(event.target.value);
    useEffect(() => {
        console.log("i run only once");
    }, []);
    useEffect(() => {
        console.log("i run when 'keyword' changes.");
    }, [keyword]);
    useEffect(() => {
        console.log("i run when 'counter' changes.");
    }, [counter]);
    useEffect(() => {
        console.log("i run when keyword & counter change");
    }, [keyword, counter]);
    return (
        <div>
            <input value={keyword} onChange={onChange} type="text" placeholder="Search here..."></input>
            <h1>{counter}</h1>
            <button onClick={onClick}>click</button>
        </div>
    );
}

export default App;
```

- [keyword, counter]
  - Îëò Ï§ë ÌïòÎÇòÍ∞Ä Î≥ÄÌôîÌïòÎ©¥ console.log("i run when keyword & counter change"); ÏΩîÎìú Ïã§Ìñâ



### Recap

```js
import { useState, useEffect } from "react";

function App() {
    const [counter, setValue] = useState(0);
    const [keyword, setKeyword] = useState("");
    const onClick = () => setValue((prev) => prev + 1);
    const onChange = (event) => setKeyword(event.target.value);
    useEffect(() => {
        console.log("i run only once");
    }, []);
    useEffect(() => {
        console.log("i run when 'keyword' changes.");
    }, [keyword]);
    useEffect(() => {
        console.log("i run when 'counter' changes.");
    }, [counter]);
    useEffect(() => {
        console.log("i run when keyword & counter change");
    }, [keyword, counter]);
    return (
        <div>
            <input value={keyword} onChange={onChange} type="text" placeholder="Search here..."></input>
            <h1>{counter}</h1>
            <button onClick={onClick}>click</button>
        </div>
    );
}

export default App;

```



### Cleanup

```js
function Hello() {
    function byFn() {
        console.log("bye :(");
    }
    function hiFn() {
        console.log("created :)");
        return byFn;
    }
    useEffect(hiFn, []);
    return <h1>Hello</h1>;
}
```

- return byFn;
  - Ïª¥Ìè¨ÎÑåÌä∏Í∞Ä ÌååÍ¥¥Îê† Îïå Ïã§Ìñâ
  - Cleanup functionÏù¥ÎùºÍ≥† Î∂ÄÎ¶Ñ

```html
import { useState, useEffect } from "react";

// Hello Ïª¥Ìè¨ÎÑåÌä∏
function Hello() {
    useEffect(function () {
        console.log("hi :)");
        return function () {
            console.log("bye :(");
        };
    }, []);
    useEffect(() => {
        console.log("hi :)");
        return () => console.log("bye :(");
    }, []);
    return <h1>Hello</h1>;
}

function App() {
    const [showing, setShowing] = useState(false);
    const onClick = () => setShowing((prev) => !prev);
    return (
        <div>
            {showing ? <Hello /> : null} {/* js ÏòÅÏó≠ */}
            <button onClick={onClick}>{showing ? "Hide" : "Show"}</button>
        </div>
    );
}

export default App;
```

- ÏùµÎ™Ö Ìï®Ïàò ÏÉùÏÑ±
  - useEffect(function () {}
  - useEffect(() => {}